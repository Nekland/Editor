/*! nekland-editor 10-02-2014 */
void 0===window.nekland&&(window.nekland={}),void 0===window.nekland.lang&&(window.nekland.lang={}),window.nekland.lang.editor={},window.nekland.Editor=function(a,b,c){void 0!==b&&(b={}),void 0!==c&&(c={}),this.settings=$.extend(!0,{},{mode:"classical",uid:uniqid(),lang:"en",modules:{}},b),this.translator=this.getTranslator(this.settings.lang),this.initModules(),this.translator.addModuleTranslations(this.modules),this.templates=$.extend(!0,{},this.getTemplates(),c),this.$wrapper=this.templates.load(a,this.settings.uid),this.$domElement=a,this.$editor=this.$wrapper.find(".nekland-editor-html"),this.$editor=this.$editor.html(this.pize(this.$editor.html())),this.lastKey=null,this.addEvents()},window.nekland.Editor.prototype.switchEditor=function(a){return this.$editor.is(":visible")?(this.$editor.hide(),this.$domElement.val(this.clearHtml(this.$domElement.val())),this.$domElement.show(),a.html(this.translator.translate("swapToText",{ucfirst:!0}))):(this.$editor.html(this.clearHtml(this.pize(this.$domElement.val()))),this.$domElement.hide(),this.$editor.show(),a.html(this.translator.translate("swapToHtml",{ucfirst:!0}))),!1},window.nekland.Editor.prototype.synchronize=function(){return this.$domElement.val(this.$editor.html())},window.nekland.Editor.prototype.execute=function(a){var b,c,d,e=a.data("editor-module");for(b=0,c=this.modules.length;c>b;b++)this.modules[b].getName()===e&&this.$editor.is(":visible")&&(d=$.proxy(this.modules[b].execute,this,a,this.modules[b])());return this.compatibility("mozilla")&&this.$editor.is(":visible")&&this.$editor.focus(),this.synchronize(),void 0!==d?d:!1},window.nekland.Editor.prototype.getTemplates=function(){var a=this;return{main:function(a){return'<div class="nekland-editor-html form-control" style="width:'+a[0]+"px;height:"+a[1]+'px" contenteditable="true"></div>'},switchButton:function(a){return void 0===a&&(a="nekland-switch-button"),'<a href="#" class="'+a+'"></a>'},before:function(b){var c,d,e;for(c="<div>",d=0,e=a.modules.length;e>d;d++)c+=a.modules[d].getTemplateBefore();return c+="</div>",c+=this.main(b)},after:function(){var b,c,d=this.switchButton();for(b=0,c=a.modules.length;c>b;b++)void 0!==a.modules[b].getTemplateAfter&&"function"==typeof a.modules[b].getTemplateAfter&&(d+=a.modules[b].getTemplateAfter());return d},load:function(b,c){var d,e;return d=$("<div>",{id:"nekland-editor-wrapper-"+c}),b.wrap(d),b.before(this.before([b.width(),b.height()])),b.after(this.after()),b.css("display","block").hide(),d=$("#nekland-editor-wrapper-"+c),e=$.trim(b.val()),""!==e?d.find(".nekland-editor-html").html(e):d.find(".nekland-editor-html").html("<p></p>"),d.find(".nekland-switch-button").html(a.translator.translate("swapToHtml",{ucfirst:!0})),d}}},window.nekland.Editor.modules=[],window.nekland.Editor.prototype.initModules=function(){var a,b,c;for(this.modules=[],a=0,b=window.nekland.Editor.modules.length;b>a;a++)c=new window.nekland.Editor.modules[a](this.translator),this.checkModule(c),"function"==typeof c.setOptions&&this.settings.modules[c.getName()]&&c.setOptions(this.settings.modules[c.getName()]),this.modules.push(c)},window.nekland.Editor.prototype.checkModule=function(a){if("function"!=typeof a.getTemplateBefore||"function"!=typeof a.getName||"function"!=typeof a.execute){var b=a.getName?a.getName():"not known name";throw"A module does't work. Check if the following module implements all needed methods: \""+b+'".'}return!0},window.nekland.Editor.prototype.addEvents=function(){var a,b=this;a=this.$wrapper.find(".nekland-switch-button"),a.click($.proxy(this.switchEditor,this,a)),this.$wrapper.find(".nekland-editor-command").click(function(a){return b.execute($(this),a)}),this.$editor.keyup($.proxy(this.onKeyUp,this)),this.addModulesEvents()},window.nekland.Editor.prototype.addModulesEvents=function(){var a,b;for(a=0,b=this.modules.length;b>a;a++)void 0!==this.modules[a].addEvents&&"function"==typeof this.modules[a].addEvents&&$.proxy(this.modules[a].addEvents,this,this.modules[a])()},window.nekland.Editor.prototype.onKeyUp=function(a){var b=a.keyCode||a.which;13===b&&this.compatibility("webkit")&&this.formatNewLine(),this.synchronize()},window.nekland.Editor.prototype.removeEnter=function(a){return 13===a.which?a.preventDefault():void 0},window.nekland.Editor.prototype.getSelection=function(){return null!==window.getSelection?window.getSelection():null!==document.getSelection?document.getSelection():document.selection.createRange()},window.nekland.Editor.prototype.setSelection=function(a,b,c,d){var e,f;if(null===c&&(c=a),null===d&&(d=b),f=this.getSelection()){if(f.collapse&&f.extend)return f.collapse(a,b),f.extend(c,d);e=document.createRange(),e.setStart(a,b),e.setEnd(c,d);try{f.removeAllRanges()}catch(g){}return f.addRange(e)}},window.nekland.Editor.prototype.getCurrentNode=function(){var a=this.getRealCurrentNode();return void 0===a.tagName&&(a=a.parentNode),a},window.nekland.Editor.prototype.getRealCurrentNode=function(){return null!==window.getSelection?this.getSelectedNode():void 0},window.nekland.Editor.prototype.getParentNode=function(){return $(this.getCurrentNode()).parent()[0]},window.nekland.Editor.prototype.getSelectedNode=function(){var a;return null!==window.getSelection?(a=window.getSelection(),a.rangeCount>0?this.getSelection().getRangeAt(0).commonAncestorContainer:!1):null!==document.selection?this.getSelection():void 0},window.nekland.Editor.prototype.setFocusNode=function(a){var b,c;return b=document.createRange(),c=this.getSelection(),null!==c&&(c.collapse(a,0),c.extend(a,0)),this.$editor.trigger("focus")},window.nekland.Editor.prototype.insertNodeAtCaret=function(a){var b,c;return c=this.getSelection(),c.rangeCount?(b=c.getRangeAt(0),b.collapse(!1),b.insertNode(a),b=b.cloneRange(),b.selectNodeContents(a),b.collapse(!1),c.removeAllRanges(),c.addRange(b)):void 0},window.nekland.Editor.prototype.replaceSelection=function(){return null!==this.savedSel&&null!==this.savedSelObj&&"BODY"!==this.savedSel[0].tagName?0===$(this.savedSel[0]).closest(".nekland-editor-html").size()?this.$editor.focus():this.setSelection(this.savedSel[0],this.savedSel[1],this.savedSelObj[0],this.savedSelObj[1]):this.$editor.focus()},window.nekland.Editor.prototype.getOrigin=function(){var a;return(a=this.getSelection())&&null!==a.anchorNode?[a.anchorNode,a.anchorOffset]:null},window.nekland.Editor.prototype.getFocus=function(){var a;return(a=this.getSelection())&&null!==a.focusNode?[a.focusNode,a.focusOffset]:null},window.nekland.Editor.prototype.saveSelection=function(){this.$editor.focus(),this.savedSel=this.getOrigin(),this.savedSelObj=this.getFocus()},window.nekland.Editor.prototype.formatNewLine=function(){var a,b=this.getParentBlockNode(),c=this.getCurrentBlockNode();if("DIV"===c.nodeName&&"DIV"===b.nodeName&&-1!==b.className.indexOf("nekland-editor-html")){var d=$(c);if("DIV"===d.get(0).tagName){var e=d.clone().html();a=$("<p>").append(e),d.replaceWith(a);var f=a.find("br").parent();this.setSelection(f[0],0,f[0],0)}}else"DIV"===c.tagName&&-1!==c.className.indexOf("nekland-editor-html")&&($(c).find("> br").remove(),a=$("<p>").html("<br />"),this.insertNodeAtCaret(a.get(0)))},window.nekland.Editor.prototype.getParentBlockNode=function(){return $(this.getCurrentBlockNode()).parent()[0]},window.nekland.Editor.prototype.getCurrentBlockNode=function(){for(var a=this.getCurrentNode();"P"!==a.tagName&&"DIV"!==a.tagName&&"TABLE"!==a.tagName&&"UL"!==a.tagName;)a=a.parentNode;return a},window.nekland.Editor.prototype.getParentNodeAtCarret=function(a){for(var b=this.getCurrentNode();b.tagName!==a&&!this.isContainer(b);)b=b.parentNode;return b.tagName===a?b:!1},window.nekland.Editor.prototype.isContainer=function(a){return"DIV"===a.nodeName&&-1!==a.className.indexOf("nekland-editor-html")},window.nekland.Editor.prototype.replaceCarretOn=function(a){this.setSelection(a[0],0,a[0],0)},window.nekland.Editor.prototype.getTranslator=function(a){var b=function(a){this.translations=window.nekland.lang.editor[a]};return b.prototype.addModuleTranslations=function(b){var c,d,e;for(c=0,d=b.length;d>c;c++)void 0!==b[c].getTranslations&&"function"==typeof b[c].getTranslations&&(e=b[c].getTranslations()[a],void 0!==e&&(this.translations=$.extend({},this.translations,e)))},b.prototype.translate=function(a,b){var c;if(void 0===b&&(b={}),void 0===this.translations[a])throw new Error("Translation missing");return c=this.translations[a],void 0!==b.ucfirst&&(c=c.charAt(0).toUpperCase()+c.slice(1)),c},new b(a)},window.nekland.Editor.prototype.pize=function(a){return a=$.trim(a),""===a||"<p></p>"===a?"<p><br /></p>":a},window.nekland.Editor.prototype.clearHtml=function(a){var b=a.replace(/&nbsp;/g," ",a);return this.indentHtml(b)},window.nekland.Editor.prototype.indentHtml=function(a){function b(){for(var a="",b=0;l>b;b++)a+="	";return a}function c(a,c){var d=a.match(q);return(a.match(o)||d)&&(c=c.replace(/\s*$/,""),c+="\n"),d&&"/"==a.charAt(1)&&l--,"\n"==c.charAt(c.length-1)&&(c+=b()),d&&"/"!=a.charAt(1)&&l++,c+=a,(a.match(p)||a.match(q))&&(c=c.replace(/ *$/,""),c+="\n"),c}function d(a){var b,c="",d="",e=/\s*([^= ]+)(?:=((['"']).*?\3|[^ ]+))?/;for(a=a.replace(/\n/g," "),a=a.replace(/[\s]{2,}/g," "),a=a.replace(/^\s+|\s+$/g," "),a.match(/\/$/)&&(d="/",a=a.replace(/\/+$/,"")),b=e.exec(a);b;)b[2]?c+=b[1].toLowerCase()+"="+b[2]:b[1]&&(c+=b[1].toLowerCase()),c+=" ",a=a.substr(b[0].length),b=e.exec(a);return c.replace(/\s*$/,"")+d+">"}var e=0,f=0,g=null,h=null,i="",j="",k="",l=0,m=["area","body","head","hr","iframe","link","meta","noscript","style","table","tbody","thead","tfoot"],n=["li","dt","dt","h[1-6]","option","script"],o=new RegExp("^<(/?"+m.join("|/?")+"|"+n.join("|")+")[ >]"),p=new RegExp("^<(br|/?"+m.join("|/?")+"|/"+n.join("|/")+")[ >]"),q=new RegExp("^</?("+["blockquote","div","dl","fieldset","form","frameset","map","ol","p","pre","select","td","th","tr","ul"].join("|")+")[ >]");for(e=0;e<a.length;e++){if(f=e,-1==a.substr(e).indexOf("<"))return j+=a.substr(e);for(;f<a.length&&"<"!=a.charAt(f);)f++;for(e!=f&&(k=a.substr(e,f-e),k.match(/^\s+$/)||("\n"==j.charAt(j.length-1)?j+=b():"\n"==k.charAt(0)&&(j+="\n"+b(),k=k.replace(/^\s+/,"")),k=k.replace(/\s+/g," "),j+=k),k.match(/\n/)&&(j+="\n"+b())),g=f;f<a.length&&">"!=a.charAt(f);)f++;if(i=a.substr(g,f-g),e=f,"!--"==i.substr(1,3)){if(!i.match(/--$/)){for(;"-->"!=a.substr(f,3);)f++;f+=2,i=a.substr(g,f-g),e=f}"\n"!=j.charAt(j.length-1)&&(j+="\n"),j+=b(),j+=i+">\n"}else"!"==i[1]?j=c(i+">",j):"?"==i[1]?j+=i+">\n":(t=i.match(/^<(script|style)/i),t?(t[1]=t[1].toLowerCase(),i=d(i),j=c(i,j),h=String(a.substr(e+1)).toLowerCase().indexOf("</"+t[1]),h&&(k=a.substr(e+1,h),e+=h,j+=k)):(i=d(i),j=c(i,j)))}return j.substr(1,j.length-1)},window.nekland.Editor.prototype.compatibility=function(a){if(void 0===this.browser){var b=navigator.userAgent.toLowerCase(),c=/(chrome)[ \/]([\w.]+)/.exec(b)||/(webkit)[ \/]([\w.]+)/.exec(b)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(b)||/(msie) ([\w.]+)/.exec(b)||b.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(b)||[];this.version=c[2],this.browser=c[1]}return"version"==a?this.version:"webkit"==a?"chrome"==this.browser||"webkit"==this.browser:this.browser==a},uniqid=function(a,b){var c,d;return"undefined"==typeof a&&(a=""),c=function(a,b){return a=parseInt(a,10).toString(16),b<a.length?a.slice(a.length-b):b>a.length?Array(1+(b-a.length)).join("0")+a:a},uniqidSeed=Math.floor(123456789*Math.random()),uniqidSeed++,d=a,d+=c(parseInt((new Date).getTime()/1e3,10),8),d+=c(uniqidSeed,5),b&&(d+=(10*Math.random()).toFixed(8).toString()),d},function(a){a.fn.neklandEditor=function(b,c){return this.each(function(){var d,e;return d=a(this),e=d.data("nekland-editor"),e?void 0:d.data("nekland-editor",new window.nekland.Editor(d,b,c))}),this}}(jQuery),window.nekland.lang.editor.en={swapToText:"swap to text",swapToHtml:"swap to html",italic:"italic",bold:"bold",addLink:"add link",close:"close",insertLink:"insert link",link:"link",removeLink:"remove link",notALink:"your link is not a valid link",alignment:"alignment",alignmentLeft:"alignment to the left",alignmentRight:"alignment to the right",alignmentCenter:"alignment to the center",alignmentJustify:"justify alignment",format:"format",formatNormal:"normal text",formatH1:"title 1",formatH2:"title 2",formatH3:"title 3",formatH4:"title 4",formatH5:"title 5",list:"list",normalList:"list",removeList:"end the list",table:"table",addTable:"add new table",insertTable:"insert new table",addRowAbove:"add row above",addRowBelow:"add row below",addColumnLeft:"add column left",addColumnRight:"add column right",deleteCurrentRow:"delete current row",deleteCurrentColumn:"delete current column",deleteCurrentTable:"delete current table",columnNumber:"number of columns",rowNumber:"number of rows",image:"image",yourImage:"your image",insertImage:"insert the image",addImage:"add an image"},function(){var a=function(a){this.translator=a};a.prototype.getTemplateBefore=function(){var a;return a='<div class="btn-group">',a+='<button type="button" class="btn btn-default nekland-editor-command" data-editor-module="basic" data-editor-command="bold" id="nekland-editor-bold"><b>'+this.translator.translate("bold",{ucfirst:!0})+"</b></button>",a+='<button type="button" class="btn btn-default nekland-editor-command" data-editor-module="basic" data-editor-command="italic" id="nekland-editor-italic"><i>'+this.translator.translate("italic",{ucfirst:!0})+"</i></button>",a+="</div>"},a.prototype.execute=function(a){var b=a.data("editor-command");document.execCommand(b)},a.prototype.getName=function(){return"basic"},window.nekland.Editor.modules.push(a)}(),function(){var a=function(a){this.translator=a};a.prototype.getTemplateBefore=function(){var a='<div class="btn-group">';return a+='<a class="btn btn-default dropdown-toggle link-modal" data-toggle="dropdown" href="#">'+this.translator.translate("link",{ucfirst:!0})+' <span class="caret"></span></a>',a+='<ul class="dropdown-menu">',a+='<li><a href="#" class="open-link-modal">'+this.translator.translate("insertLink",{ucfirst:!0})+"</a></li>",a+='<li><a href="#" class="nekland-editor-command" data-editor-command="unlink" data-editor-module="link">'+this.translator.translate("removeLink",{ucfirst:!0})+"</a></li>",a+="</ul></div>"},a.prototype.getTemplateAfter=function(){var a='<div class="modal fade nekland-editor-link" id="link-modal" role="dialog" aria-hidden="true">';return a+='<div class="modal-dialog"><div class="modal-content"><div class="modal-header">',a+='<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>',a+="<h3>"+this.translator.translate("addLink",{ucfirst:!0})+"</h3>",a+="</div>",a+='<div class="modal-body">',a+='<input type="text" class="link-input form-control" id="link-input" style="width: 250px;" />',a+='<p class="error link-error"></p>',a+="</div>",a+='<div class="modal-footer">',a+='<button type="button" class="btn" data-dismiss="modal" aria-hidden="true">',a+=this.translator.translate("close",{ucfirst:!0})+"</button>",a+='<button type="button" class="btn btn-primary nekland-editor-command" data-dismiss="modal" data-editor-module="link" data-editor-command="createLink">',a+=this.translator.translate("insertLink",{ucfirst:!0})+"</button>",a+="</div></div></div></div>"},a.prototype.addEvents=function(){this.$wrapper.find(".open-link-modal").click($.proxy(function(){this.saveSelection(),$("#link-modal").modal("show")},this)),this.$wrapper.find(".link-input").keydown(this.removeEnter)},a.prototype.execute=function(a){var b,c=a.data("editor-command"),d=$("#link-modal"),e=null,f=!1;if("createLink"===c){if(e=$("#link-input").val(),!/(http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/.test(e))return d.find(".link-error").html(this.translator.translate("notALink",{ucfirst:!0})),f;f=!0}else if("unlink"===c&&(b=this.getCurrentNode(),"A"===b.tagName))return $(b).replaceWith($(b).text()),this.synchronize(),f;return this.replaceSelection(),document.execCommand(c,!1,e),f},a.prototype.getName=function(){return"link"},window.nekland.Editor.modules.push(a)}(),function(){var a=function(a){this.translator=a};a.prototype.getTemplateBefore=function(){var a='<div class="btn-group">';return a+='<a class="btn btn-default dropdown-toggle" data-toggle="dropdown" href="javascript:;">'+this.translator.translate("alignment",{ucfirst:!0})+' <span class="caret"></span></a>',a+='<ul class="dropdown-menu">',a+='<li><a href="javascript:;" class="nekland-editor-command" data-editor-module="alignment" data-editor-command="justifyLeft"><span class="glyphicon glyphicon-align-left"></span> '+this.translator.translate("alignmentLeft",{ucfirst:!0})+"</a></li>",a+='<li><a href="javascript:;" class="nekland-editor-command" data-editor-module="alignment" data-editor-command="justifyRight"><span class="glyphicon glyphicon-align-right"></span> '+this.translator.translate("alignmentRight",{ucfirst:!0})+"</a></li>",a+='<li><a href="javascript:;" class="nekland-editor-command" data-editor-module="alignment" data-editor-command="justifyCenter"><span class="glyphicon glyphicon-align-center"></span> '+this.translator.translate("alignmentCenter",{ucfirst:!0})+"</a></li>",a+='<li><a href="javascript:;" class="nekland-editor-command" data-editor-module="alignment" data-editor-command="justifyFull"><span class="glyphicon glyphicon-align-justify"></span> '+this.translator.translate("alignmentJustify",{ucfirst:!0})+"</a></li>",a+="</ul></div>"},a.prototype.execute=function(a){var b=a.data("editor-command");return document.execCommand(b),!0},a.prototype.getName=function(){return"alignment"},window.nekland.Editor.modules.push(a)}(),function(){var a=function(a){this.translator=a};a.prototype.getTemplateBefore=function(){var a='<div class="btn-group">';return a+='<a class="btn btn-default dropdown-toggle" data-toggle="dropdown" href="javascript:;">'+this.translator.translate("format",{ucfirst:!0})+' <span class="caret"></span></a>',a+='<ul class="dropdown-menu">',a+='<li><a href="javascript:;" class="nekland-editor-command" data-editor-module="format" data-editor-command="p">'+this.translator.translate("formatNormal",{ucfirst:!0})+"</a></li>",a+='<li><a href="javascript:;" class="nekland-editor-command nekland-editor-formath1" data-editor-module="format" data-editor-command="h1">'+this.translator.translate("formatH1",{ucfirst:!0})+"</a></li>",a+='<li><a href="javascript:;" class="nekland-editor-command nekland-editor-formath2" data-editor-module="format" data-editor-command="h2">'+this.translator.translate("formatH2",{ucfirst:!0})+"</a></li>",a+='<li><a href="javascript:;" class="nekland-editor-command nekland-editor-formath3" data-editor-module="format" data-editor-command="h3">'+this.translator.translate("formatH3",{ucfirst:!0})+"</a></li>",a+='<li><a href="javascript:;" class="nekland-editor-command nekland-editor-formath4" data-editor-module="format" data-editor-command="h4">'+this.translator.translate("formatH4",{ucfirst:!0})+"</a></li>",a+='<li><a href="javascript:;" class="nekland-editor-command nekland-editor-formath5" data-editor-module="format" data-editor-command="h5">'+this.translator.translate("formatH5",{ucfirst:!0})+"</a></li>",a+="</ul></div>"},a.prototype.execute=function(a){var b=a.data("editor-command");return document.execCommand("formatblock",!1,b),!0},a.prototype.getName=function(){return"format"},window.nekland.Editor.modules.push(a)}(),function(){var a=function(a){this.translator=a};a.prototype.getTemplateBefore=function(){var a='<div class="btn-group">';return a+='<a class="btn btn-default dropdown-toggle list-dropdown" data-toggle="dropdown" href="javascript:;">'+this.translator.translate("list",{ucfirst:!0})+' <span class="caret"></span></a>',a+='<ul class="dropdown-menu">',a+='<li><a class="nekland-editor-command list-button" data-editor-module="list" data-editor-command="insertUnorderedList" href="javascript:;"><span class="glyphicon glyphicon-list"></span> '+this.translator.translate("normalList",{ucfirst:!0})+"</a></li>",a+="</ul></div>"},a.prototype.addEvents=function(){this.$wrapper.find(".list-dropdown").click($.proxy(function(){var a=this.$wrapper.find(".list-button");"LI"===this.getCurrentNode().tagName?a.html('<span class="glyphicon glyphicon-list"></span> '+this.translator.translate("removeList",{ucfirst:!0})):a.html('<span class="glyphicon glyphicon-list"></span> '+this.translator.translate("normalList",{ucfirst:!0}))},this))},a.prototype.execute=function(a){var b,c,d,e=a.data("editor-command"),f=!1;if("LI"===this.getCurrentNode().tagName&&(f=!0),document.execCommand(e),f){var g="";if(c=this.getRealCurrentNode(),void 0===c.tagName){var h=c;g=h.toString(),c=h.parentNode,c.removeChild(h)}else g="<br />";b=$(c),b.find("br:last").remove(),d=$("<p>").append(g),b.append(d),this.replaceCarretOn(d)}else this.compatibility("webkit")&&(b=$(this.getParentNodeAtCarret("LI")),b.find("span, b, i").each(function(){$(this).removeAttr("style")})),d=this.getParentNodeAtCarret("P"),d&&(d=$(d),d.after(d.html()),this.replaceCarretOn(d.next("ul").find("li")),d.remove());return!0},a.prototype.getName=function(){return"list"},window.nekland.Editor.modules.push(a)}(),function(){var a=function(a){this.translator=a};a.prototype.getTemplateBefore=function(){var a='<div class="btn-group">';return a+='<a class="btn btn-default dropdown-toggle table-dropdown" data-toggle="dropdown" href="javascript:;">'+this.translator.translate("table",{ucfirst:!0})+' <span class="caret"></span></a>',a+='<ul class="dropdown-menu">',a+='<li><a class="open-table-modal" href="javascript:;">'+this.translator.translate("addTable",{ucfirst:!0})+"</a></li>",a+='<li class="table-updates"><a href="javascript:;" class="nekland-editor-command" data-editor-module="table" data-editor-command="addRowAbove">'+this.translator.translate("addRowAbove",{ucfirst:!0})+"</a></li>",a+='<li class="table-updates"><a href="javascript:;" class="nekland-editor-command" data-editor-module="table" data-editor-command="addRowBelow">'+this.translator.translate("addRowBelow",{ucfirst:!0})+"</a></li>",a+='<li class="table-updates"><a href="javascript:;" class="nekland-editor-command" data-editor-module="table" data-editor-command="addColumnLeft">'+this.translator.translate("addColumnLeft",{ucfirst:!0})+"</a></li>",a+='<li class="table-updates"><a href="javascript:;" class="nekland-editor-command" data-editor-module="table" data-editor-command="addColumnRight">'+this.translator.translate("addColumnRight",{ucfirst:!0})+"</a></li>",a+='<li class="table-updates"><a href="javascript:;" class="nekland-editor-command" data-editor-module="table" data-editor-command="deleteCurrentRow">'+this.translator.translate("deleteCurrentRow",{ucfirst:!0})+"</a></li>",a+='<li class="table-updates"><a href="javascript:;" class="nekland-editor-command" data-editor-module="table" data-editor-command="deleteCurrentColumn">'+this.translator.translate("deleteCurrentColumn",{ucfirst:!0})+"</a></li>",a+='<li class="table-updates"><a href="javascript:;" class="nekland-editor-command" data-editor-module="table" data-editor-command="deleteCurrentTable">'+this.translator.translate("deleteCurrentTable",{ucfirst:!0})+"</a></li>",a+="</ul></div>"},a.prototype.getTemplateAfter=function(){var a='<div class="modal fade" id="table-modal" role="dialog" aria-hidden="true">';return a+='<div class="modal-dialog"><div class="modal-content"><div class="modal-header">',a+='<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>',a+="<h3>"+this.translator.translate("addTable",{ucfirst:!0})+"</h3>",a+="</div>",a+='<div class="modal-body">',a+='<div class="row"><div class="col-md-6">',a+='<label for="table-columns-input">'+this.translator.translate("columnNumber",{ucfirst:!0})+"</label>",a+='<input type="number" class="" id="table-columns-input" />',a+='</div><div class="col-md-6">',a+='<label for="table-rows-input">'+this.translator.translate("rowNumber",{ucfirst:!0})+"</label>",a+='<input type="number" class="" id="table-rows-input" />',a+="</div></div>",a+="</div>",a+='<div class="modal-footer">',a+='<button type="button" class="btn" data-dismiss="modal" aria-hidden="true">',a+=this.translator.translate("close",{ucfirst:!0})+"</button>",a+='<button type="button" class="btn btn-primary nekland-editor-command" data-dismiss="modal" data-editor-command="newTable" data-editor-module="table">',a+=this.translator.translate("insertLink",{ucfirst:!0})+"</button>",a+="</div></div></div></div>"},a.prototype.addEvents=function(){var a=this.$wrapper.find(".table-dropdown");if(a.click($.proxy(function(){var b=this.getCurrentNode();"TABLE"===b.tagName||"TR"===b.tagName||"TD"===b.tagName?a.parent().find(".table-updates").show():a.parent().find(".table-updates").hide()},this)),this.$wrapper.find(".open-table-modal").click($.proxy(function(){this.saveSelection(),$("#table-modal").modal("show")},this)),this.compatibility("mozilla"))try{document.execCommand("enableObjectResizing",!1,!1),document.execCommand("enableInlineTableEditing",!1,!1)}catch(b){}},a.prototype.execute=function(a){var b=a.data("editor-command"),c=0;if("newTable"===b){var d,e=$("#table-columns-input").val(),f=$("#table-rows-input").val(),g=0,h='<table class="table table-bordered table-hover"><tbody>';for(c;f>c;c++){for(h+="<tr>",g=0;e>g;g++)h+="<td></td>";h+="</tr>"}h+="</tbody></table><p><br /></p>",this.replaceSelection(),d=this.getCurrentNode(),"P"===d.tagName&&$(d).remove(),document.execCommand("insertHTML",!1,h)}else{var i,j=$(this.getCurrentNode()),k="",l=j.parent(),m=l.parent().find("tr");if("addRowAbove"===b||"addRowBelow"===b){var n=l.find("td").length;for(k="<tr>",c;n>c;c++)k+="<td></td>";k+="</tr>","addRowBelow"===b?l.after(k):l.before(k)}else if("addColumnLeft"===b||"addColumnRight"===b){i=l.find("td").index(j);var o;o="addColumnLeft"===b?function(){$(this).find("td").eq(i).before("<td></td>")}:function(){$(this).find("td").eq(i).after("<td></td>")},m.each(o)}else if("deleteCurrentRow"===b)j.parent().remove();else if("deleteCurrentColumn"===b)i=l.find("td").index(j),m.each(function(){$(this).find("td").eq(i).remove()});else if("deleteCurrentTable"===b){for(;"TABLE"!==j.get(0).tagName;)j=j.parent();j.remove()}}return!0},a.prototype.getName=function(){return"table"},window.nekland.Editor.modules.push(a)}();